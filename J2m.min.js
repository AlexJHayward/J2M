(function(){var a={toM:function(a){a=a.replace(/^bq\.(.*)$/gm,function(a,b){return"> "+b+"\n"}),a=a.replace(/([*_])(.*)\1/g,function(a,b,c){var d="*"===b?"**":"*";return d+c+d}),a=a.replace(/^((?:#|-|\+|\*)+) (.*)$/gm,function(a,b,c){var d=2,e="1.";1<b.length&&(d=parseInt(4*(b.length-1))+2);var e=b[b.length-1];return"#"==e&&(e="1."),Array(d).join(" ")+e+" "+c}),a=a.replace(/^h([0-6])\.(.*)$/gm,function(a,b,c){return Array(parseInt(b)+1).join("#")+c}),a=a.replace(/\{\{([^}]+)\}\}/g,"`$1`"),a=a.replace(/\?\?((?:.[^?]|[^?].)+)\?\?/g,"<cite>$1</cite>"),a=a.replace(/\+([^+]*)\+/g,"<ins>$1</ins>"),a=a.replace(/\^([^^]*)\^/g,"<sup>$1</sup>"),a=a.replace(/~([^~]*)~/g,"<sub>$1</sub>"),a=a.replace(/-([^-]*)-/g,"-$1-"),a=a.replace(/\{code(:([a-z]+))?\}([^]*?)\{code\}/gm,"```$2$3```"),a=a.replace(/\{quote\}([^]*)\{quote\}/gm,function(a,b){lines=b.split(/\r?\n/gm);for(var c=0;c<lines.length;c++)lines[c]="> "+lines[c];return lines.join("\n")}),a=a.replace(/!([^|\n\s]+)\|([^\n!]*)alt=([^\n!\,]+?)(,([^\n!]*))?!/g,"![$3]($1)"),a=a.replace(/!([^|\n\s]+)\|([^\n!]*)!/g,"![]($1)"),a=a.replace(/!([^\n\s!]+)!/g,"![]($1)"),a=a.replace(/\[([^|]+)\|(.+?)\]/g,"[$1]($2)"),a=a.replace(/\[(.+?)\]([^\(]+)/g,"<$1>$2"),a=a.replace(/{noformat}/g,"```"),a=a.replace(/{color:([^}]+)}([^]*?){color}/gm,"<span style=\"color:$1\">$2</span>"),lines=a.split(/\r?\n/gm),lines_to_remove=[];for(var b=0;b<lines.length;b++)if(line_content=lines[b],seperators=line_content.match(/\|\|/g),null!=seperators){lines[b]=lines[b].replace(/\|\|/g,"|"),console.log(seperators),header_line="";for(var c=0;c<seperators.length-1;c++)header_line+="|---";header_line+="|",lines.splice(b+1,0,header_line)}a="";for(var b=0;b<lines.length;b++)a+=lines[b]+"\n";return a},toJ:function(a){var b=[],c=0;a=a.replace(/`{3,}(\w+)?((?:\n|.)+?)`{3,}/g,function(a,d,e){var f="{code";d&&(f+=":"+d),f+="}"+e+"{code}";var g="J2MBLOCKPLACEHOLDER"+c++ +"%%";return b.push({key:g,value:f}),g}),a=a.replace(/`([^`]+)`/g,function(a,d){var e="J2MBLOCKPLACEHOLDER"+c++ +"%%";return b.push({key:e,value:"{{"+d+"}}"}),e}),a=a.replace(/`([^`]+)`/g,"{{$1}}"),a=a.replace(/^(.*?)\n([=-])+$/gm,function(a,b,c){return"h"+("="===c[0]?1:2)+". "+b}),a=a.replace(/^([#]+)(.*?)$/gm,function(a,b,c){return"h"+b.length+"."+c}),a=a.replace(/([*_]+)(.*?)\1/g,function(a,b,c){var d=1===b.length?"_":"*";return d+c+d}),a=a.replace(/^(\s*)- (.*)$/gm,function(a,b,c){var d=2;return 0<b.length&&(d=parseInt(b.length/4)+2),Array(d).join("-")+" "+c}),a=a.replace(/^(\s+)1. (.*)$/gm,function(a,b,c){var d=2;return 1<b.length&&(d=parseInt(b.length/4)+2),Array(d).join("#")+" "+c});var d={cite:"??",del:"-",ins:"+",sup:"^",sub:"~"};a=a.replace(new RegExp("<("+Object.keys(d).join("|")+")>(.*?)</\\1>","g"),function(a,b,c){var e=d[b];return e+c+e}),a=a.replace(/<span style="color:(#[^"]+)">([^]*?)<\/span>/gm,"{color:$1}$2{color}"),a=a.replace(/~~(.*?)~~/g,"-$1-"),a=a.replace(/!\[\]\(([^)\n\s]+)\)/g,"!$1!"),a=a.replace(/!\[([^\]\n]+)\]\(([^)\n\s]+)\)/g,"!$2|alt=$1!"),a=a.replace(/\[([^\]]+)\]\(([^)]+)\)/g,"[$1|$2]"),a=a.replace(/<([^>]+)>/g,"[$1]");for(var e,f=0;f<b.length;f++)e=b[f],a=a.replace(e.key,e.value);lines=a.split(/\r?\n/gm),lines_to_remove=[];for(var f=0;f<lines.length;f++)line_content=lines[f],null!=line_content.match(/\|---/g)&&(lines[f-1]=lines[f-1].replace(/\|/g,"||"),lines.splice(f,1));a="";for(var f=0;f<lines.length;f++)a+=lines[f]+"\n";return a}};try{window.J2M=a}catch(b){module.exports=a}})();